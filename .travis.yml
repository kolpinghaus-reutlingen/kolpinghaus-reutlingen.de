language: ruby

cache: bundler

before_install: gem update bundler

install:
  - bundle install

before_script:
    - chmod a+x travis-*.sh
    - export DEPLOY_REPO="https://${REPO_KEY}@github.com/kolpinghaus-reutlingen/kolpinghaus-reutlingen.de.git"

script: "./travis-build.sh"

before_deploy: "./travis-test.sh"

deploy: 
  provider: script
  skip_cleanup: true
  script: "./travis-deploy.sh"

notifications:
  email:
    recipients:
      - travis-ci@5ls.de
      
branches:
  only:
  - master

sudo: false
